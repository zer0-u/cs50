# week7 SQL

## 0306

### 講義動画
- TV番組の名前とジャンルのアンケートを取ったらしい
  - ジャンルは複数選べる
  - ジャンルは1つの列にカンマ区切りで収められている
- 結果を使っていろいろな分析をしてみたい
- スプレッドシートが得意なこと
  - 検索やソートが素早い
  - 大量のデータを保存できる(限度はある)
- スプレッドシートは行と列でデータを保存する
- データを追加する時は行が増える
- 列は属性やフィールド(保存するデータの種類)を表す
  - フォームやシートを作る時に考えるべきこと
  - 列はあまり増えない
- データのレイアウトやスキーマ(構造)は事前に決めておくのが一般的
- CSVファイルはフラットファイルデータベースと呼ばれる
- データベース＝データを保存するファイルやプログラムのこと
- カンマの代わりに違う区切り文字を使っても良い
- データの中にカンマがあると混乱を起こしやすい
  - 含めたい時はデータをダブルクォートで挟むとよい
  - 区切り文字としてのカンマとそうでないものを分ける
- フラットファイルデータベースでは数式を扱えない
- 回答結果をCSVとしてダウンロードしてCS50 IDEにアップロードする
- Pythonを使って分析してみる(favorites.py)
  - 実行はできないが一応実装してみる
- やりたいことは小さく分けて実装する
- open関数の第2引数(モード)のデフォルト値はr(読み込み)
  - →読み込みの場合は第2引数がなくても動く
- DictReaderはpythonに組み込まれたもの
  - 最初の行をカンマで分割し、それぞれの値が列名だと「仮定」している
  - 1行目にヘッダがないとうまく動作しない
- タイトルの重複をなくしたい
- 方法1：setを使う
  - addメソッドで追加
  - forループで取り出し(setはイテレータを保持している)
- setの中身をソートする
  - sorted関数に渡せば自動的にソートしてくれる
- 表記ゆれまではカバーできない
  - 大文字・小文字を揃える＝正規化(なんらかのルールに従って標準化すること)
  - upper()メソッドを呼び出す
- 多少はまとまったがまだ重複している
  - 末尾のスペースの有無が差を生んでいるっぽい
  - stripメソッドで取り除く(先頭と末尾の空白文字を削除)
- これ以上の正規化はとても手間がかかる
  - typoの検知・修正など
  - これが現実
- 今日はここまで(30:55)