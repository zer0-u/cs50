<!DOCTYPE html>

<html lang="en">

<head>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <title>Trivia!</title>
</head>

<body>

    <div class="jumbotron">
        <h1>Trivia!</h1>
    </div>

    <div class="container">

        <div class="section">
            <h2>Part 1: Multiple Choice </h2>
            <hr>
            <h3>問題文のサンプル(1)</h3>
            <div id="answer-area-1">
                <span id="correct-answer-1">Correct!</span>
                <span id="incorrect-answer-1">Incorrect</span>
            </div>

            <button class="choice" value="1">選択肢1</button>
            <button class="choice" value="2">選択肢2</button>
            <button class="choice" value="3">選択肢3</button>

        </div>

        <div class="section">
            <h2>Part 2: Free Response</h2>
            <hr>
            <h3>問題文のサンプル(2)</h3>
            <div id="answer-area-2">
                <span id="correct-answer-2">Correct!</span>
                <span id="incorrect-answer-2">Incorrect</span>
            </div>
            <form>
                <input id="input" type="text" autofocus autocomplete="false" placeholder="answer?"  />
                <input type="submit" />
            </form>
        </div>

    </div>
    <script>

        // part2
        const hideAnswers2 = () => {
            const answers = document.getElementById('answer-area-2').children;
            for (answer of answers) {
                answer.style.display = 'none';
            }
        }
        hideAnswers2();

        const resetPart2 = ()=>{
            hideAnswers2();
            document.getElementById('input').classList.remove('correct','incorrect');
        }

        const showAnswer2 = isCorrect => {
            const id = isCorrect ? 'correct' : 'incorrect';
            const elem = document.getElementById(`${id}-answer-2`);
            elem.style.display = 'block';
        };

        const checkAnswer2 = input => {
            return input === '2';
        };

        document.querySelector('form').addEventListener('submit', e => {
            e.preventDefault();
            resetPart2();
            const input = document.getElementById('input');
            const isCorrect = checkAnswer2(input.value);
            const answerClass = isCorrect ? 'correct' : 'incorrect';
            input.classList.add(answerClass);
            showAnswer2(isCorrect);
        });

        // part1
        const hideAnswers1 = () => {
            const answers = document.getElementById('answer-area-1').children;
            for (answer of answers) {
                answer.style.display = 'none';
            }
        }
        hideAnswers1();

        const showAnswer1 = isCorrect => {
            const id = isCorrect ? 'correct' : 'incorrect';
            const elem = document.getElementById(`${id}-answer-1`);
            elem.style.display = 'block';
        };

        const choiceButtons = document.querySelectorAll('.choice');
        const resetPart1 = () => {
            for (button of choiceButtons) {
                button.classList.remove('correct', 'incorrect');
            }
            hideAnswers1();
        }

        const checkChooseAnswer1 = choose => {
            return choose === '1';
        };

        const buttonClicked1 = e => {
            resetPart1();
            const isCorrect = checkChooseAnswer1(e.target.value);
            const answerClass = isCorrect ? 'correct' : 'incorrect';
            e.target.classList.add(answerClass);
            showAnswer1(isCorrect);
        };

        for (button of choiceButtons) {
            button.addEventListener('click', buttonClicked1);
        }

    </script>
</body>

</html>